<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video 001 - Advanced Player</title>
    <!-- Video.js CSS -->
    <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet">
    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            height: 100vh;
        }

        .player-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: transparent;
            cursor: auto;
            transition: cursor 0.3s ease;
        }

        .player-container.hide-cursor {
            cursor: none;
        }

        .video-js {
            width: 100% !important;
            height: 100% !important;
            background: transparent !important;
        }

        .video-js .vjs-big-play-button {
            font-size: 2.5em;
            line-height: 2em;
            height: 2em;
            width: 2em;
            border-radius: 50%;
            background-color: #5f2d0c !important;
            border: none !important;
            margin-left: -1em;
            margin-top: -1em;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .video-js .vjs-big-play-button:hover {
            background-color: #804515 !important;
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
        }

        .video-js .vjs-control-bar {
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%);
            color: #fff;
        }

        .video-js .vjs-progress-control {
            height: 6px;
        }

        .video-js .vjs-play-progress {
            background: #f3cb83;
        }

        .video-js .vjs-volume-bar {
            background: rgba(115, 133, 159, 0.5);
        }

        .video-js .vjs-volume-level {
            background: #f3cb83;
        }

        /* Custom styling for better appearance */
        .video-js .vjs-control-bar .vjs-button:hover {
            color: #f3cb83;
        }

        .video-js .vjs-menu-button-popup .vjs-menu .vjs-menu-content {
            background: rgba(0, 0, 0, 0.9);
            border-radius: 5px;
        }

        .video-js .vjs-menu li.vjs-menu-item:hover {
            background: rgba(243, 203, 131, 0.3);
        }

        /* Loading indicator */
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 0.3s ease;
        }

        .loading-overlay.hidden {
            display: none;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid #f3cb83;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Error message */
        .error-message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            text-align: center;
            z-index: 1001;
            background: rgba(231, 76, 60, 0.9);
            padding: 20px;
            border-radius: 10px;
            display: none;
        }

        /* Video title overlay */
        .video-title-overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            z-index: 100;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .video-title-overlay.show {
            opacity: 1;
        }

        /* Mobile responsive */
        @media (max-width: 768px) {
            .video-title-overlay {
                font-size: 18px;
                top: 10px;
                left: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="player-container">
        <!-- Loading overlay -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="spinner"></div>
        </div>

        <!-- Error message -->
        <div class="error-message" id="errorMessage">
            <h3>Playback Error</h3>
            <p>Unable to load the video. Please try again later.</p>
        </div>

        <!-- Video title overlay -->
        <div class="video-title-overlay" id="videoTitle">Video 001</div>

        <!-- Video player -->
        <video
            id="videoPlayer"
            class="video-js vjs-default-skin"
            controls
            preload="auto"
            data-setup='{}'
            crossorigin="anonymous">
            
            <p class="vjs-no-js">
                To view this video please enable JavaScript, and consider upgrading to a web browser that
                <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>.
            </p>
        </video>
    </div>

    <!-- Video.js JavaScript -->
    <script src="https://vjs.zencdn.net/8.6.1/video.js"></script>
    <!-- HLS support -->
    <script src="https://cdn.jsdelivr.net/npm/@videojs/http-streaming@3.8.0/dist/videojs-http-streaming.min.js"></script>
    
    <script>
        let player;
        let mouseIdleTimeout;
        let controlsVisible = true;

        // Initialize the player when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            initializePlayer();
            setupEventListeners();
        });

        function initializePlayer() {
            const loadingOverlay = document.getElementById('loadingOverlay');
            const errorMessage = document.getElementById('errorMessage');
            const videoTitle = document.getElementById('videoTitle');
            
            showLoading();

            player = videojs('videoPlayer', {
                fluid: true,
                responsive: true,
                aspectRatio: '16:9',
                playbackRates: [0.5, 0.75, 1, 1.25, 1.5, 2],
                plugins: {
                    httpSourceSelector: {
                        default: 'auto'
                    }
                }
            });

            // Set the HLS source
            player.src({
                src: './index.m3u8',
                type: 'application/x-mpegURL'
            });

            // Event listeners
            player.ready(function() {
                console.log('Player is ready for Video 001');
                hideLoading();
                showVideoTitle();
            });

            player.on('loadstart', function() {
                showLoading();
            });

            player.on('canplay', function() {
                hideLoading();
            });

            player.on('error', function() {
                hideLoading();
                showError('Failed to load video. Please check your connection and try again.');
            });

            player.on('play', function() {
                hideVideoTitle();
            });

            player.on('pause', function() {
                showVideoTitle();
            });

            // Hide controls when mouse is idle
            player.on('mousemove', function() {
                showControls();
                resetMouseIdleTimer();
            });

            player.on('mouseleave', function() {
                if (!player.paused()) {
                    hideControls();
                }
            });
        }

        function setupEventListeners() {
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (!player) return;
                
                switch(e.code) {
                    case 'Space':
                        e.preventDefault();
                        togglePlayPause();
                        break;
                    case 'ArrowLeft':
                        e.preventDefault();
                        player.currentTime(player.currentTime() - 10);
                        break;
                    case 'ArrowRight':
                        e.preventDefault();
                        player.currentTime(player.currentTime() + 10);
                        break;
                    case 'ArrowUp':
                        e.preventDefault();
                        player.volume(Math.min(1, player.volume() + 0.1));
                        break;
                    case 'ArrowDown':
                        e.preventDefault();
                        player.volume(Math.max(0, player.volume() - 0.1));
                        break;
                    case 'KeyF':
                        e.preventDefault();
                        toggleFullscreen();
                        break;
                    case 'KeyM':
                        e.preventDefault();
                        player.muted(!player.muted());
                        break;
                }
            });

            // Handle fullscreen changes
            document.addEventListener('fullscreenchange', handleFullscreenChange);
            document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
            document.addEventListener('mozfullscreenchange', handleFullscreenChange);
            document.addEventListener('MSFullscreenChange', handleFullscreenChange);
        }

        function togglePlayPause() {
            if (player.paused()) {
                player.play();
            } else {
                player.pause();
            }
        }

        function toggleFullscreen() {
            if (player.isFullscreen()) {
                player.exitFullscreen();
            } else {
                player.requestFullscreen();
            }
        }

        function showLoading() {
            document.getElementById('loadingOverlay').classList.remove('hidden');
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').classList.add('hidden');
        }

        function showError(message) {
            const errorElement = document.getElementById('errorMessage');
            errorElement.querySelector('p').textContent = message;
            errorElement.style.display = 'block';
        }

        function hideError() {
            document.getElementById('errorMessage').style.display = 'none';
        }

        function showVideoTitle() {
            document.getElementById('videoTitle').classList.add('show');
        }

        function hideVideoTitle() {
            document.getElementById('videoTitle').classList.remove('show');
        }

        function showControls() {
            if (player) {
                player.userActive(true);
                document.querySelector('.player-container').classList.remove('hide-cursor');
                controlsVisible = true;
            }
        }

        function hideControls() {
            if (player && !player.paused()) {
                player.userActive(false);
                document.querySelector('.player-container').classList.add('hide-cursor');
                controlsVisible = false;
            }
        }

        function resetMouseIdleTimer() {
            clearTimeout(mouseIdleTimeout);
            mouseIdleTimeout = setTimeout(function() {
                if (!player.paused()) {
                    hideControls();
                }
            }, 3000);
        }

        function handleFullscreenChange() {
            // Additional fullscreen handling if needed
            if (document.fullscreenElement || document.webkitFullscreenElement || 
                document.mozFullScreenElement || document.msFullscreenElement) {
                // Entered fullscreen
                console.log('Entered fullscreen mode');
            } else {
                // Exited fullscreen
                console.log('Exited fullscreen mode');
                showControls();
            }
        }

        // Handle page visibility changes
        document.addEventListener('visibilitychange', function() {
            if (player) {
                if (document.hidden) {
                    player.pause();
                } else {
                    // Optionally resume playback
                }
            }
        });

        // Cleanup on page unload
        window.addEventListener('beforeunload', function() {
            if (player) {
                player.dispose();
            }
        });
    </script>
</body>
</html>